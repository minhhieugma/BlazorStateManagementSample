@inherits BaseComponent

<h1>Comment Creation Modal</h1>

<div class="mb-3">
    <label for="exampleFormControlTextarea1" class="form-label">Email address</label>
    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
               @bind:get="@Comment"
               @bind:set="SetAsync"
               @bind:event="oninput" ></textarea>
</div>
<div class="mb-3">
    <button class="btn btn-secondary" @onclick="Back">Back</button>
    <button class="btn btn-primary" @onclick="AddComment">Add</button>
</div>

@code
{
    [Parameter]
    public string Comment { get; set; }

    private Task SetAsync(string value)
    {
        Comment = value;
        UpdateCurrentStage();

        return Task.CompletedTask;
    }

    private void UpdateCurrentStage()
    {
        Dispatcher.Dispatch(new UpdateTrailAction
        {
            Trail =
            {
                Type = typeof(CommentCreationModal),
                ComponentParameters = new Dictionary<string, object> { { nameof(Comment), Comment } }
            }
        });
    }

    private void Back()
    {
        Dispatcher.Dispatch(new BackStageAction { });
    }

    private void AddComment()
    {
        Dispatcher.Dispatch(new BackStageAction { });
    }
}